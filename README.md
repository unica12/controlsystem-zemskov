1. Анализ

1.1 Введение
Система предназначена для централизованного учёта и контроля дефектов на строительных объектах. Приложение позволяет фиксировать дефекты, назначать ответственных, контролировать их устранение и формировать отчёты по объектам.

Пользователи системы:
•	Инженеры (создание дефектов, обновление информации).
•	Менеджеры (назначение задач, контроль сроков, формирование отчётов).
•	Руководители и заказчики (мониторинг прогресса и отчётности).

1.2. Цели и задачи
Цель разработки: создать удобную систему для отслеживания дефектов на стройплощадках и повышения прозрачности контроля качества.
Основные задачи:
•	Упорядочить процесс регистрации и устранения дефектов.
•	Централизовать хранение информации по объектам.
•	Автоматизировать контроль статусов и формирование отчётности.
•	Обеспечить безопасный доступ и разграничение прав пользователей.

1.3. Функциональные требования (FR)
ID	Требование	Приоритет
FR-1	Регистрация и аутентификация пользователей	Высокий
FR-2	Разграничение ролей (Инженер, Менеджер, Руководитель)	Высокий
FR-3	Управление проектами и объектами	Высокий
FR-4	Создание, редактирование и удаление дефектов	Высокий
FR-5	Изменение статусов дефектов (Новая → В работе → Закрыта)	Высокий
FR-6	Ведение комментариев и истории изменений	Средний
FR-7	Поиск, сортировка и фильтрация дефектов	Средний
FR-8	Формирование простой отчётности (CSV)	Средний

1.4. Нефункциональные требования (NFR)
ID	Требование	Приоритет
NFR-1	Время отклика ≤ 1 сек при 50 активных пользователях	Высокий
NFR-2	Резервное копирование БД ежедневно	Высокий
NFR-3	Интерфейс на русском языке, адаптивный под ПК/планшеты	Высокий
NFR-4	Хранение паролей через bcrypt/argon2	Высокий
NFR-5	Защита от SQL-инъекций, XSS и CSRF	Высокий
NFR-6	Масштабируемость: возможность запуска в Docker-контейнерах	Высокий

1.5. Анализ рисков требований
Риск	Описание	Вероятность	Влияние	Меры
Изменение требований	
Возможны новые пожелания заказчика
	Средняя	Средняя	Использовать модульный подход
Потеря данных	Сбой сервера или базы данных	Низкая	Высокое	Резервное копирование БД
Ошибки авторизации	Уязвимости в логине/паролях	Средняя	Высокое	Использовать bcrypt, валидацию и JWT
Медленная работа	
Увеличение нагрузки
	Низкая	Высокое	Автоматическое резервное копирование
Уязвимости безопасности	SQL-инъекции, XSS, CSRF	Средняя	Средняя	Оптимизация запросов, индексы

1.6. Трассировка требований к задачам и тестам
Требование	Задача разработки	Проверка (тест)
FR-1: Регистрация пользователей	
Модуль Users/Auth (регистрация и логин)
	Тест входа и регистрации
FR-2: Роли	Проверка ролей при доступе к API	Тест ограничения доступа
FR-3: Управление проектами	
CRUD операций по проектам
	
Тест добавления и удаления

FR-4: Дефекты	CRUD дефектов 	
Проверка создания и редактирования

FR-5: Статусы дефектов	Изменение статуса дефекта	Проверка переходов статусов
NFR-4: Хранение паролей	Хэширование паролей bcrypt	
Проверка в базе данных

NFR-5: SQL/XSS/CSRF	Middleware защиты	
Ручная проверка запросов

1.7. Приоритизация (MVP vs Post-MVP)
•	MVP (обязательно): FR-1, FR-2, FR-3, FR-4, FR-5, NFR-4, NFR-5, NFR-6
•	Post-MVP (дополнительно): FR-6, FR-7, FR-8, NFR-1–3

2. Проектирование
2.1. Архитектура приложения (монолит)
Система строится как монолитное веб-приложение, разворачиваемое через Docker Compose.
Слои архитектуры:
•	Frontend (React SPA)
o	UI для инженеров, менеджеров и руководителей.
o	Взаимодействие с API через REST.
•	Backend (FastAPI)
o	Реализация бизнес-логики.
o	Валидация данных, аутентификация, авторизация.
o	Модули: users, projects, defects, reports.
•	Database (PostgreSQL)
o	Хранение всех сущностей (пользователи, проекты, дефекты, история).
•	Infrastructure
o	Docker Compose (одной командой поднимаем всё).
o	Резервное копирование БД.

2.2 Use Case диаграмма
<img width="202" height="346" alt="image" src="https://github.com/user-attachments/assets/bdc6cfa9-5c4a-4cbe-9298-7dd7597b900a" />
2.3. ER-диаграмма базы данных
<img width="384" height="536" alt="image" src="https://github.com/user-attachments/assets/5c11a424-25ba-435b-8d0e-8952a7f7e6c2" />
